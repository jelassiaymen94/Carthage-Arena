{# Shared Data Table Component
   Usage with embed (recommended for complex tables):

   {% embed 'components/_table.html.twig' with {
       headers: ['Nom', 'Email', 'Rôle', 'Actions'],
       title: 'Utilisateurs',
       titleLink: path('admin_users'),
       titleLinkText: 'Voir tout',
       emptyMessage: 'Aucun utilisateur trouvé.',
       emptyIcon: 'group_off',
       striped: false,
       compact: false
   } %}
       {% block rows %}
           {% for user in users %}
           <tr class="hover:bg-surface-hover transition-colors">
               <td class="px-6 py-4 font-semibold text-white">{{ user.username }}</td>
               <td class="px-6 py-4 text-white/50">{{ user.email }}</td>
               <td class="px-6 py-4">...</td>
               <td class="px-6 py-4">...</td>
           </tr>
           {% endfor %}
       {% endblock %}
   {% endembed %}
#}

{% set tableTitle = title|default(null) %}
{% set tableTitleLink = titleLink|default(null) %}
{% set tableTitleLinkText = titleLinkText|default('Voir tout') %}
{% set tableHeaders = headers|default([]) %}
{% set tableEmptyMessage = emptyMessage|default('Aucune donnée disponible.') %}
{% set tableEmptyIcon = emptyIcon|default('inbox') %}
{% set isCompact = compact|default(false) %}
{% set isStriped = striped|default(false) %}
{% set extraClass = class|default('') %}

<div class="bg-surface-dark border border-white/5 rounded-2xl overflow-hidden carthage-border-top {{ extraClass }}">
    {# Optional Title Bar #}
    {% if tableTitle %}
    <div class="flex items-center justify-between px-6 py-4 border-b border-white/5">
        <h2 class="text-lg font-bold text-white">{{ tableTitle }}</h2>
        {% if tableTitleLink %}
        <a href="{{ tableTitleLink }}" class="text-sm font-semibold text-primary hover:text-primary/80 transition-colors">
            {{ tableTitleLinkText }}
        </a>
        {% endif %}
    </div>
    {% endif %}

    {# Scrollable Table #}
    <div class="overflow-x-auto">
        <table class="w-full text-sm">
            <thead>
                <tr class="border-b border-white/5">
                    {% for header in tableHeaders %}
                    <th class="text-left {{ isCompact ? 'px-4 py-2' : 'px-6 py-3' }} text-xs font-semibold text-white/30 uppercase tracking-wider">
                        {{ header }}
                    </th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody class="divide-y divide-white/5">
                {% block rows %}
                {# Override this block with your table rows #}
                <tr>
                    <td colspan="{{ tableHeaders|length }}" class="px-6 py-12 text-center">
                        <div class="flex flex-col items-center gap-3">
                            <span class="material-symbols-outlined text-[40px] text-white/10">{{ tableEmptyIcon }}</span>
                            <p class="text-sm text-white/30">{{ tableEmptyMessage }}</p>
                        </div>
                    </td>
                </tr>
                {% endblock %}
            </tbody>
        </table>
    </div>
</div>
