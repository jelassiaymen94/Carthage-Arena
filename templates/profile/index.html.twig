{% extends 'base.html.twig' %}

{% block title %}Profil - {{ user.name }} - Carthage Arena{% endblock %}

{% block body %}
<div class="app-container">
    {% include 'components/_sidebar.html.twig' %}

    <main class="main-content">
        <div class="card" style="margin-bottom: 2rem; background: var(--gradient-card);">
            <div style="display: flex; gap: 2rem; align-items: flex-start;">
                <div style="position: relative;">
                    <img src="{{ user.avatar }}" alt="{{ user.name }}" style="width: 150px; height: 150px; border-radius: 1rem; border: 4px solid var(--color-primary); object-fit: cover;">
                    <div style="position: absolute; bottom: -10px; right: -10px; width: 50px; height: 50px; background: var(--gradient-primary); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 800; font-size: 1.25rem; border: 3px solid var(--color-bg-card);">
                        {{ user.level }}
                    </div>
                </div>

                <div style="flex: 1;">
                    <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1rem;">
                        <div>
                            <h1 style="font-size: 2rem; font-weight: 800; margin-bottom: 0.5rem;">{{ user.name }}</h1>
                            <div style="display: flex; gap: 1rem; align-items: center; margin-bottom: 0.5rem;">
                                <span class="badge badge-premium">{{ user.role }}</span>
                                <span style="color: var(--color-text-secondary); font-size: 0.875rem;">
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display: inline; vertical-align: middle;">
                                        <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                                        <circle cx="12" cy="10" r="3"></circle>
                                    </svg>
                                    {{ user.country }}
                                </span>
                                <span style="color: var(--color-text-secondary); font-size: 0.875rem;">
                                    Membre depuis {{ user.joinDate }}
                                </span>
                            </div>
                            <p style="color: var(--color-text-secondary); max-width: 600px;">{{ user.bio }}</p>
                        </div>

                        <button class="btn btn-secondary">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                            </svg>
                            Modifier le Profil
                        </button>
                    </div>

                    <div style="display: flex; gap: 1rem;">
                        <div style="flex: 1; background: var(--color-bg-tertiary); padding: 1rem; border-radius: var(--radius-lg); text-align: center;">
                            <div style="font-size: 0.75rem; color: var(--color-text-muted); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 0.25rem;">Rang</div>
                            <div style="font-size: 1.25rem; font-weight: 700; color: var(--color-warning);">{{ user.rank }}</div>
                        </div>
                        <div style="flex: 1; background: var(--color-bg-tertiary); padding: 1rem; border-radius: var(--radius-lg); text-align: center;">
                            <div style="font-size: 0.75rem; color: var(--color-text-muted); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 0.25rem;">Balance</div>
                            <div style="font-size: 1.25rem; font-weight: 700; color: var(--color-warning);">{{ user.balance }} CP</div>
                        </div>
                        <div style="flex: 1; background: var(--color-bg-tertiary); padding: 1rem; border-radius: var(--radius-lg); text-align: center;">
                            <div style="font-size: 0.75rem; color: var(--color-text-muted); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 0.25rem;">Email</div>
                            <div style="font-size: 0.875rem; font-weight: 600;">{{ user.email }}</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 2rem; margin-bottom: 2rem;">
            <div class="card">
                <h2 style="font-size: 1.5rem; font-weight: 700; margin-bottom: 1.5rem;">Statistiques</h2>
                
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1.5rem; margin-bottom: 2rem;">
                    <div style="text-align: center; padding: 1.5rem; background: var(--color-bg-tertiary); border-radius: var(--radius-lg);">
                        <div style="font-size: 2.5rem; font-weight: 800; margin-bottom: 0.5rem;">{{ stats.matchesPlayed }}</div>
                        <div style="font-size: 0.875rem; color: var(--color-text-secondary);">Matchs Joués</div>
                    </div>
                    <div style="text-align: center; padding: 1.5rem; background: var(--color-bg-tertiary); border-radius: var(--radius-lg);">
                        <div style="font-size: 2.5rem; font-weight: 800; margin-bottom: 0.5rem; color: var(--color-success);">{{ stats.wins }}</div>
                        <div style="font-size: 0.875rem; color: var(--color-text-secondary);">Victoires</div>
                    </div>
                    <div style="text-align: center; padding: 1.5rem; background: var(--color-bg-tertiary); border-radius: var(--radius-lg);">
                        <div style="font-size: 2.5rem; font-weight: 800; margin-bottom: 0.5rem; color: var(--color-error);">{{ stats.losses }}</div>
                        <div style="font-size: 0.875rem; color: var(--color-text-secondary);">Défaites</div>
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem;">
                    <div style="background: var(--gradient-card); padding: 1.5rem; border-radius: var(--radius-lg); border: 1px solid var(--color-border);">
                        <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                            <div style="width: 48px; height: 48px; background: linear-gradient(135deg, #00FF88 0%, #00CC6E 100%); border-radius: var(--radius-md); display: flex; align-items: center; justify-content: center;">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
                                </svg>
                            </div>
                            <div>
                                <div style="font-size: 0.875rem; color: var(--color-text-secondary);">Taux de Victoire</div>
                                <div style="font-size: 1.75rem; font-weight: 800;">{{ stats.winRate }}%</div>
                            </div>
                        </div>
                        <div style="background: var(--color-bg-tertiary); height: 8px; border-radius: 4px; overflow: hidden;">
                            <div style="background: var(--color-success); height: 100%; width: {{ stats.winRate }}%;"></div>
                        </div>
                    </div>

                    <div style="background: var(--gradient-card); padding: 1.5rem; border-radius: var(--radius-lg); border: 1px solid var(--color-border);">
                        <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                            <div style="width: 48px; height: 48px; background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%); border-radius: var(--radius-md); display: flex; align-items: center; justify-content: center;">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path>
                                    <path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path>
                                    <path d="M4 22h16"></path>
                                    <path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"></path>
                                    <path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"></path>
                                    <path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"></path>
                                </svg>
                            </div>
                            <div>
                                <div style="font-size: 0.875rem; color: var(--color-text-secondary);">Tournois Gagnés</div>
                                <div style="font-size: 1.75rem; font-weight: 800;">{{ stats.tournamentsWon }}</div>
                            </div>
                        </div>
                        <div style="font-size: 0.875rem; color: var(--color-text-secondary);">
                            Gains totaux: <span style="color: var(--color-warning); font-weight: 700;">{{ stats.totalEarnings }}</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2 style="font-size: 1.5rem; font-weight: 700; margin-bottom: 1.5rem;">Succès</h2>
                <div style="display: flex; flex-direction: column; gap: 1rem;">
                    {% for achievement in achievements %}
                    <div style="display: flex; align-items: center; gap: 1rem; padding: 1rem; background: var(--color-bg-tertiary); border-radius: var(--radius-lg); border-left: 3px solid var(--color-primary);">
                        <div style="font-size: 2rem;">{{ achievement.icon }}</div>
                        <div style="flex: 1;">
                            <div style="font-weight: 600; margin-bottom: 0.25rem;">{{ achievement.name }}</div>
                            <div style="font-size: 0.75rem; color: var(--color-text-muted);">{{ achievement.date }}</div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>

        <div class="card">
            <h2 style="font-size: 1.5rem; font-weight: 700; margin-bottom: 1.5rem;">Matchs Récents</h2>
            <div style="display: flex; flex-direction: column; gap: 0.75rem;">
                {% for match in recentMatches %}
                <div style="display: flex; align-items: center; justify-content: space-between; padding: 1rem; background: var(--color-bg-tertiary); border-radius: var(--radius-lg); border-left: 3px solid {% if match.result == 'Victoire' %}var(--color-success){% else %}var(--color-error){% endif %};">
                    <div style="display: flex; align-items: center; gap: 1.5rem;">
                        <div style="width: 40px; height: 40px; background: {% if match.result == 'Victoire' %}linear-gradient(135deg, #00FF88 0%, #00CC6E 100%){% else %}linear-gradient(135deg, #FF0022 0%, #CC001C 100%){% endif %}; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                            {% if match.result == 'Victoire' %}
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="20 6 9 17 4 12"></polyline>
                            </svg>
                            {% else %}
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <line x1="18" y1="6" x2="6" y2="18"></line>
                                <line x1="6" y1="6" x2="18" y2="18"></line>
                            </svg>
                            {% endif %}
                        </div>
                        <div>
                            <div style="font-weight: 600; margin-bottom: 0.25rem;">{{ match.game }}</div>
                            <div style="font-size: 0.875rem; color: var(--color-text-secondary);">{{ match.result }} - {{ match.score }}</div>
                        </div>
                    </div>
                    <div style="font-size: 0.875rem; color: var(--color-text-muted);">{{ match.date }}</div>
                </div>
                {% endfor %}
            </div>
        </div>
    </main>
</div>
{% endblock %}
